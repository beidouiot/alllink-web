<!DOCTYPE html>
<html>

<head>
    <!-- 页面meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">




    <title>设备采集数据</title>
    <meta name="description" content="设备采集数据">
    <meta name="keywords" content="设备采集数据">




    <!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" name="viewport">
    <!-- Bootstrap 3.3.6 -->
    <!-- Font Awesome -->
    <!-- Ionicons -->
    <!-- iCheck -->
    <!-- Morris chart -->
    <!-- jvectormap -->
    <!-- Date Picker -->
    <!-- Daterange picker -->
    <!-- Bootstrap time Picker -->
    <!--<link rel="stylesheet" href="../../../plugins/timepicker/bootstrap-timepicker.min.css">-->
    <!-- bootstrap wysihtml5 - text editor -->
    <!--数据表格-->
    <!-- 表格树 -->
    <!-- select2 -->
    <!-- Bootstrap Color Picker -->
    <!-- bootstrap wysihtml5 - text editor -->
    <!--bootstrap-markdown-->
    <!-- Theme style -->
    <!-- AdminLTE Skins. Choose a skin from the css/skins
       folder instead of downloading all of them to reduce the load. -->
    <!-- Ion Slider -->
    <!-- ion slider Nice -->
    <!-- bootstrap slider -->
    <!-- bootstrap-datetimepicker -->

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->








    <!-- jQuery 2.2.3 -->
    <!-- jQuery UI 1.11.4 -->
    <!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
    <!-- Bootstrap 3.3.6 -->
    <!-- Morris.js charts -->
    <!-- Sparkline -->
    <!-- jvectormap -->
    <!-- jQuery Knob Chart -->
    <!-- daterangepicker -->
    <!-- datepicker -->
    <!-- Bootstrap WYSIHTML5 -->
    <!-- Slimscroll -->
    <!-- FastClick -->
    <!-- iCheck -->
    <!-- AdminLTE App -->
    <!-- 表格树 -->
    <!-- select2 -->
    <!-- bootstrap color picker -->
    <!-- bootstrap time picker -->
    <!--<script src="../../../plugins/timepicker/bootstrap-timepicker.min.js"></script>-->
    <!-- Bootstrap WYSIHTML5 -->
    <!--bootstrap-markdown-->
    <!-- CK Editor -->
    <!-- InputMask -->
    <!-- DataTables -->
    <!-- ChartJS 1.0.1 -->
    <!-- FLOT CHARTS -->
    <!-- FLOT RESIZE PLUGIN - allows the chart to redraw when the window is resized -->
    <!-- FLOT PIE PLUGIN - also used to draw donut charts -->
    <!-- FLOT CATEGORIES PLUGIN - Used to draw bar charts -->
    <!-- jQuery Knob -->
    <!-- Sparkline -->
    <!-- Morris.js charts -->
    <!-- Ion Slider -->
    <!-- Bootstrap slider -->
    <!-- bootstrap-datetimepicker -->
    <!-- 页面meta /-->

    <link rel="stylesheet" href="../../../../../plugins/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../../../../plugins/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="../../../../../plugins/ionicons/css/ionicons.min.css">
    <link rel="stylesheet" href="../../../../../plugins/iCheck/square/blue.css">
    <link rel="stylesheet" href="../../../../../plugins/morris/morris.css">
    <link rel="stylesheet" href="../../../../../plugins/jvectormap/jquery-jvectormap-1.2.2.css">
    <link rel="stylesheet" href="../../../../../plugins/datepicker/datepicker3.css">
    <link rel="stylesheet" href="../../../../../plugins/daterangepicker/daterangepicker.css">
    <link rel="stylesheet" href="../../../../../plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.min.css">
    <link rel="stylesheet" href="../../../../../plugins/datatables/dataTables.bootstrap.css">
    <link rel="stylesheet" href="../../../../../plugins/treeTable/jquery.treetable.css">
    <link rel="stylesheet" href="../../../../../plugins/treeTable/jquery.treetable.theme.default.css">
    <link rel="stylesheet" href="../../../../../plugins/select2/select2.css">
    <link rel="stylesheet" href="../../../../../plugins/colorpicker/bootstrap-colorpicker.min.css">
    <link rel="stylesheet" href="../../../../../plugins/bootstrap-markdown/css/bootstrap-markdown.min.css">
    <link rel="stylesheet" href="../../../../../plugins/adminLTE/css/AdminLTE.css">
    <link rel="stylesheet" href="../../../../../plugins/adminLTE/css/skins/_all-skins.min.css">
    <link rel="stylesheet" href="../../../../../css/style.css">
    <link rel="stylesheet" href="../../../../../plugins/ionslider/ion.rangeSlider.css">
    <link rel="stylesheet" href="../../../../../plugins/ionslider/ion.rangeSlider.skinNice.css">
    <link rel="stylesheet" href="../../../../../plugins/bootstrap-slider/slider.css">
    <link rel="stylesheet" href="../../../../../plugins/bootstrap-datetimepicker/bootstrap-datetimepicker.css">
    <style>
        .color-palette {
            height: 35px;
            line-height: 35px;
            text-align: center;
        }

        .color-palette-set {
            margin-bottom: 15px;
        }

        .color-palette span {
            display: none;
            font-size: 12px;
        }

        .color-palette:hover span {
            display: block;
        }

        .color-palette-box h4 {
            position: absolute;
            top: 100%;
            left: 25px;
            margin-top: -40px;
            color: rgba(255, 255, 255, 0.8);
            font-size: 12px;
            display: block;
            z-index: 7;
        }
    </style>
</head>

<body class="hold-transition skin-purple sidebar-mini">
    <div class="box-body" id="box-body">
       
    </div>
    <!-- /.box-body -->


    <script src="../../../../../plugins/jQuery/jquery-2.2.3.min.js"></script>
    <script src="../../../../../plugins/jQueryUI/jquery-ui.min.js"></script>
    <script>
        $.widget.bridge('uibutton', $.ui.button);
    </script>
    <script src="../../../../../plugins/bootstrap/js/bootstrap.min.js"></script>
    <script src="../../../../../plugins/raphael/raphael-min.js"></script>
    <script src="../../../../../plugins/morris/morris.min.js"></script>
    <script src="../../../../../plugins/sparkline/jquery.sparkline.min.js"></script>
    <script src="../../../../../plugins/jvectormap/jquery-jvectormap-1.2.2.min.js"></script>
    <script src="../../../../../plugins/jvectormap/jquery-jvectormap-world-mill-en.js"></script>
    <script src="../../../../../plugins/knob/jquery.knob.js"></script>
    <script src="../../../../../plugins/daterangepicker/moment.min.js"></script>
    <script src="../../../../../plugins/daterangepicker/daterangepicker.js"></script>
    <script src="../../../../../plugins/daterangepicker/daterangepicker.zh-CN.js"></script>
    <script src="../../../../../plugins/datepicker/bootstrap-datepicker.js"></script>
    <script src="../../../../../plugins/datepicker/locales/bootstrap-datepicker.zh-CN.js"></script>
    <script src="../../../../../plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.all.min.js"></script>
    <script src="../../../../../plugins/slimScroll/jquery.slimscroll.min.js"></script>
    <script src="../../../../../plugins/fastclick/fastclick.js"></script>
    <script src="../../../../../plugins/iCheck/icheck.min.js"></script>
    <script src="../../../../../plugins/adminLTE/js/app.min.js"></script>
    <script src="../../../../../plugins/treeTable/jquery.treetable.js"></script>
    <script src="../../../../../plugins/select2/select2.full.min.js"></script>
    <script src="../../../../../plugins/colorpicker/bootstrap-colorpicker.min.js"></script>
    <script src="../../../../../plugins/bootstrap-wysihtml5/bootstrap-wysihtml5.zh-CN.js"></script>
    <script src="../../../../../plugins/bootstrap-markdown/js/bootstrap-markdown.js"></script>
    <script src="../../../../../plugins/bootstrap-markdown/locale/bootstrap-markdown.zh.js"></script>
    <script src="../../../../../plugins/bootstrap-markdown/js/markdown.js"></script>
    <script src="../../../../../plugins/bootstrap-markdown/js/to-markdown.js"></script>
    <script src="../../../../../plugins/ckeditor/ckeditor.js"></script>
    <script src="../../../../../plugins/input-mask/jquery.inputmask.js"></script>
    <script src="../../../../../plugins/input-mask/jquery.inputmask.date.extensions.js"></script>
    <script src="../../../../../plugins/input-mask/jquery.inputmask.extensions.js"></script>
    <script src="../../../../../plugins/datatables/jquery.dataTables.min.js"></script>
    <script src="../../../../../plugins/datatables/dataTables.bootstrap.min.js"></script>
    <script src="../../../../../plugins/chartjs/Chart.min.js"></script>
    <script src="../../../../../plugins/flot/jquery.flot.min.js"></script>
    <script src="../../../../../plugins/flot/jquery.flot.resize.min.js"></script>
    <script src="../../../../../plugins/flot/jquery.flot.pie.min.js"></script>
    <script src="../../../../../plugins/flot/jquery.flot.categories.min.js"></script>
    <script src="../../../../../plugins/ionslider/ion.rangeSlider.min.js"></script>
    <script src="../../../../../plugins/bootstrap-slider/bootstrap-slider.js"></script>
    <script src="../../../../../plugins/bootstrap-datetimepicker/bootstrap-datetimepicker.js"></script>
    <script src="../../../../../plugins/bootstrap-datetimepicker/locales/bootstrap-datetimepicker.zh-CN.js"></script>
    <script>
    var urlinfo = window.location.href;
    var len = urlinfo.split("?");
    var newsidinfo = len[1];
    console.log("len="+len);
    console.log("newsidinfo=" + newsidinfo);
    var newsids = newsidinfo.split("=");
    var parameter1 = newsids[1];
    console.log("parameter1="+parameter1);
        $(document).ready(function() {
            // 选择框
            $(".select2").select2();

            // WYSIHTML5编辑器
            $(".textarea").wysihtml5({
                locale: 'zh-CN'
            });
            showDeviceData();
        });


function showDeviceData() {
    var jsonData = {"id":parameter1};
    var storage = window.localStorage;
    var ctx = storage.getItem("ctx");
    var htmlData = "";
    $.ajax({
        type: "POST",
        dataType: "json",
        async: false,
        beforeSend: function(XMLHttpRequest) {
            XMLHttpRequest.setRequestHeader("Authorization","Bearer "+storage.getItem("token"));
        },
        contentType: "application/json;charset=utf-8",
        url:ctx+'api/ds/deviceNewData/v1/findAllDeviceNewData',
        data:JSON.stringify(jsonData),
        success: function(resData){
            if(resData.code == 0) {
                // alert(resData.code+resData.msg);
                var dataSize = resData.data.length;
                if(dataSize > 0) {
                    var rowSize = Math.floor(resData.data.length / 6);
                    var rdSize = resData.data.length % 6;
                    if(dataSize <= 6) {
                        htmlData += '<div class="row">';
                        $.each(resData.data, function(i,item){
                            htmlData += '<div class="col-sm-4 col-md-2">';
                            htmlData += '<div class="color-palette-set" style="border:1px solid black">';
                            htmlData += '<h3>&nbsp;&nbsp;'+item.modelName+'('+item.modelCode+'):</h3>';
                            htmlData += '<h3>&nbsp;&nbsp;'+item.receivedData+'</h3>';
                            htmlData += '</div>';
                            htmlData += '</div>';
                        });
                        htmlData += '</div>';
                    } else {
                        if(rdSize == 0) {
                                $.each(resData.data, function(i,item){
                                    // htmlData += '<div class="col-sm-4 col-md-2">';
                                    // htmlData += '<div class="color-palette-set">';
                                    // htmlData += '<h3>'+item.modelName+'('+item.modeCode+'):</h3>';
                                    // htmlData += '<h3>'+item.receivedData+'</h3>';
                                    // htmlData += '</div>';
                                    // htmlData += '</div>';

                                    console.log("each----i="+i);
                                    if(i % 6 == 0) {
                                        console.log("each--1--i="+i);
                                        htmlData += '<div class="row">';
                                        htmlData += '<div class="col-sm-4 col-md-2">';
                                        htmlData += '<div class="color-palette-set" style="border:1px solid black">';
                                        htmlData += '<h3>&nbsp;&nbsp;'+item.modelName+'('+item.modelCode+'):</h3>';
                                        htmlData += '<h3>&nbsp;&nbsp;'+item.receivedData+'</h3>';
                                        htmlData += '</div>';
                                        htmlData += '</div>';
                                        // htmlData += '</div>';
                                    } else {
                                        console.log("each--2--i="+i);
                                        htmlData += '<div class="col-sm-4 col-md-2">';
                                        htmlData += '<div class="color-palette-set" style="border:1px solid black">';
                                        htmlData += '<h3>&nbsp;&nbsp;'+item.modelName+'('+item.modelCode+'):</h3>';
                                        htmlData += '<h3>&nbsp;&nbsp;'+item.receivedData+'</h3>';
                                        htmlData += '</div>';
                                        htmlData += '</div>';
                                        if(i % 6 == 5) {
                                           htmlData += '</div>'; 
                                        }
                                    }
                                });
                        } else {
                            var k = 0;
                            var j = 0;
                            $.each(resData.data, function(m,item){
                                console.log("each----m="+m);
                                console.log("k----k="+k);
                                console.log("rowSize----rowSize="+rowSize);
                                if(k < rowSize) {
                                    console.log("k1====="+k);
                                    if(m % 6 == 0) {
                                        console.log("k2====="+k);
                                        
                                        htmlData += '<div class="row">';
                                        htmlData += '<div class="col-sm-4 col-md-2">';
                                        htmlData += '<div class="color-palette-set" style="border:1px solid black">';
                                        htmlData += '<h3>&nbsp;&nbsp;'+item.modelName+'('+item.modelCode+'):</h3>';
                                        htmlData += '<h3>&nbsp;&nbsp;'+item.receivedData+'</h3>';
                                        htmlData += '</div>';
                                        htmlData += '</div>';
                                        // htmlData += '</div>';
                                    } else {
                                        console.log("k3====="+k);
                                        htmlData += '<div class="col-sm-4 col-md-2" >';
                                        htmlData += '<div class="color-palette-set" style="border:1px solid black">';
                                        htmlData += '<h3>&nbsp;&nbsp;'+item.modelName+'('+item.modelCode+'):</h3>';
                                        htmlData += '<h3>&nbsp;&nbsp;'+item.receivedData+'</h3>';
                                        htmlData += '</div>';
                                        htmlData += '</div>';
                                        if(m % 6 == 5) {
                                           htmlData += '</div>'; 
                                           k++;
                                        }
                                    }
                                } else {
                                    console.log("j1====="+j);
                                    if(j < 1) {
                                        htmlData += '<div class="row">';
                                    }
                                    j++;
                                    htmlData += '<div class="col-sm-4 col-md-2">';
                                    htmlData += '<div class="color-palette-set" style="border:1px solid black">';
                                    htmlData += '<h3>&nbsp;&nbsp;'+item.modelName+'('+item.modelCode+'):</h3>';
                                    htmlData += '<h3>&nbsp;&nbsp;'+item.receivedData+'</h3>';
                                    htmlData += '</div>';
                                    htmlData += '</div>';
                                    if(j == rdSize) {
                                       htmlData += '</div>'; 
                                   }
                                }

                            });
                        }
                    }
                }
                
                console.log("htmlData="+htmlData);
                console.log("resData.data="+JSON.stringify(resData.data));
                console.log("resData.data.size="+resData.data.length);
                console.log("resData.data.size1="+Math.floor(resData.data.length/6));
                console.log("resData.data.size2="+(resData.data.length%6));

                $('#box-body').html(htmlData);

                // data = resData.data;
            } else {
                alert(resData.code+resData.msg);

            }
            
        },
        error: function(XMLHttpRequest,status, error) {
            console.log("xhr======"+JSON.stringify(XMLHttpRequest));
        }
    });
    
}

    </script>
</body>

</html>