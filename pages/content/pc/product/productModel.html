<!DOCTYPE html>
<html>

<head>
    <!-- 页面meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>产品物模型</title>
    <meta name="description" content="产品物模型">
    <meta name="keywords" content="产品物模型">




    <!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" name="viewport">
    <!-- Bootstrap 3.3.6 -->
    <!-- Font Awesome -->
    <!-- Ionicons -->
    <!-- iCheck -->
    <!-- Morris chart -->
    <!-- jvectormap -->
    <!-- Date Picker -->
    <!-- Daterange picker -->
    <!-- Bootstrap time Picker -->
    <!--<link rel="stylesheet" href="../../../plugins/timepicker/bootstrap-timepicker.min.css">-->
    <!-- bootstrap wysihtml5 - text editor -->
    <!--数据表格-->
    <!-- 表格树 -->
    <!-- select2 -->
    <!-- Bootstrap Color Picker -->
    <!-- bootstrap wysihtml5 - text editor -->
    <!--bootstrap-markdown-->
    <!-- Theme style -->
    <!-- AdminLTE Skins. Choose a skin from the css/skins
       folder instead of downloading all of them to reduce the load. -->
    <!-- Ion Slider -->
    <!-- ion slider Nice -->
    <!-- bootstrap slider -->
    <!-- bootstrap-datetimepicker -->

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->








    <!-- jQuery 2.2.3 -->
    <!-- jQuery UI 1.11.4 -->
    <!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
    <!-- Bootstrap 3.3.6 -->
    <!-- Morris.js charts -->
    <!-- Sparkline -->
    <!-- jvectormap -->
    <!-- jQuery Knob Chart -->
    <!-- daterangepicker -->
    <!-- datepicker -->
    <!-- Bootstrap WYSIHTML5 -->
    <!-- Slimscroll -->
    <!-- FastClick -->
    <!-- iCheck -->
    <!-- AdminLTE App -->
    <!-- 表格树 -->
    <!-- select2 -->
    <!-- bootstrap color picker -->
    <!-- bootstrap time picker -->
    <!--<script src="../../../plugins/timepicker/bootstrap-timepicker.min.js"></script>-->
    <!-- Bootstrap WYSIHTML5 -->
    <!--bootstrap-markdown-->
    <!-- CK Editor -->
    <!-- InputMask -->
    <!-- DataTables -->
    <!-- ChartJS 1.0.1 -->
    <!-- FLOT CHARTS -->
    <!-- FLOT RESIZE PLUGIN - allows the chart to redraw when the window is resized -->
    <!-- FLOT PIE PLUGIN - also used to draw donut charts -->
    <!-- FLOT CATEGORIES PLUGIN - Used to draw bar charts -->
    <!-- jQuery Knob -->
    <!-- Sparkline -->
    <!-- Morris.js charts -->
    <!-- Ion Slider -->
    <!-- Bootstrap slider -->
    <!-- bootstrap-datetimepicker -->
    <!-- 页面meta /-->

    <link rel="stylesheet" href="../../../../plugins/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../../../plugins/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="../../../../plugins/ionicons/css/ionicons.min.css">
    <link rel="stylesheet" href="../../../../plugins/iCheck/square/blue.css">
    <link rel="stylesheet" href="../../../../plugins/morris/morris.css">
    <link rel="stylesheet" href="../../../../plugins/jvectormap/jquery-jvectormap-1.2.2.css">
    <link rel="stylesheet" href="../../../../plugins/datepicker/datepicker3.css">
    <link rel="stylesheet" href="../../../../plugins/daterangepicker/daterangepicker.css">
    <link rel="stylesheet" href="../../../../plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.min.css">
    <link rel="stylesheet" href="../../../../plugins/datatables/dataTables.bootstrap.css">
    <link rel="stylesheet" href="../../../../plugins/treeTable/jquery.treetable.css">
    <link rel="stylesheet" href="../../../../plugins/treeTable/jquery.treetable.theme.default.css">
    <link rel="stylesheet" href="../../../../plugins/select2/select2.css">
    <link rel="stylesheet" href="../../../../plugins/colorpicker/bootstrap-colorpicker.min.css">
    <link rel="stylesheet" href="../../../../plugins/bootstrap-markdown/css/bootstrap-markdown.min.css">
    <link rel="stylesheet" href="../../../../plugins/adminLTE/css/AdminLTE.css">
    <link rel="stylesheet" href="../../../../plugins/adminLTE/css/skins/_all-skins.min.css">
    <link rel="stylesheet" href="../../../../css/style.css">
    <link rel="stylesheet" href="../../../../plugins/ionslider/ion.rangeSlider.css">
    <link rel="stylesheet" href="../../../../plugins/ionslider/ion.rangeSlider.skinNice.css">
    <link rel="stylesheet" href="../../../../plugins/bootstrap-slider/slider.css">
    <link rel="stylesheet" href="../../../../plugins/bootstrap-datetimepicker/bootstrap-datetimepicker.css">
</head>

<body >




                <div class="box-body">

                    <!--tab页-->
                    <div class="nav-tabs-custom">

                        <!--tab头-->
                        <ul class="nav nav-tabs">
                            <li class="active">
                                <a href="#tab-label" data-toggle="tab">产品属性模型</a>
                            </li>
                            <li>
                                <a href="#tab-common" data-toggle="tab">产品事件模型</a>
                            </li>
                            <li>
                                <a href="#tab-select" data-toggle="tab">产品指令模型</a>
                            </li>
                        </ul>
                        <!--tab头/-->

                        <!--tab内容-->
                        <div class="tab-content">

                            <!--属性显示的内容-->
                            <div class="tab-pane active" id="tab-label">
                                <h5>属性模型</h5>
                                <div class="row data-type" id="prowdiv">


                                </div>
    <div class="form-group form-inline">
        <div class="btn-group">
   <button type="button" class="btn  btn-success" title="增加属性" onclick="showPropertyDiv(null);">增加属性</button><button type="button" class="btn  btn-success" title="保存属性" onclick="saveProperty();">保存属性</button></div>
    </div>
                            </div>
                            <!--属性显示的内容/-->

                            <!--事件模型-->
                            <div class="tab-pane" id="tab-common">
                                <h5>事件模型</h5>
                                <div class="row data-type" id="erowdiv">

 

                                </div>
                                    <div class="form-group"><div class="btn-group">
   <button type="button" class="btn  btn-success" title="增加事件" onclick="showEventDiv();">增加事件</button><button type="button" class="btn btn-success" title="保存事件" onclick="saveEvent();">保存事件</button></div>
    </div>
                            </div>
                            <!--事件模型/-->

                            <!--指令模型-->
                            <div class="tab-pane" id="tab-select">
                                <h5>指令模型</h5>
                                <div class="row data-type" id="crowdiv">

                                 


                                </div>
                                    <div class="form-group"><div class="btn-group">
   <button type="button" class="btn btn-success" title="增加指令" onclick="showCommandDiv();">增加指令</button>&nbsp;<button type="button" class="btn btn-success" title="保存指令" onclick="saveCommand();">保存指令</button></div>
    </div>
                            </div>
                            <!--下拉框/-->

                            
                        </div>
                        <!--tab内容/-->

                    </div>
                    <!--tab页/-->

                        <div class="form-group"><div class="btn-group">
   <button type="button" class="btn btn-success" title="发布产品模型" onclick="pubModel();">发布产品物模型</button>&nbsp;</div>
    </div>

                </div>
    <script src="../../../../plugins/jQuery/jquery-2.2.3.min.js"></script>
    <script src="../../../../plugins/jQueryUI/jquery-ui.min.js"></script>
    <script>
        $.widget.bridge('uibutton', $.ui.button);
    </script>
    <script src="../../../../plugins/bootstrap/js/bootstrap.min.js"></script>
    <script src="../../../../plugins/raphael/raphael-min.js"></script>
    <script src="../../../../plugins/morris/morris.min.js"></script>
    <script src="../../../../plugins/sparkline/jquery.sparkline.min.js"></script>
    <script src="../../../../plugins/jvectormap/jquery-jvectormap-1.2.2.min.js"></script>
    <script src="../../../../plugins/jvectormap/jquery-jvectormap-world-mill-en.js"></script>
    <script src="../../../../plugins/knob/jquery.knob.js"></script>
    <script src="../../../../plugins/daterangepicker/moment.min.js"></script>
    <script src="../../../../plugins/daterangepicker/daterangepicker.js"></script>
    <script src="../../../../plugins/daterangepicker/daterangepicker.zh-CN.js"></script>
    <script src="../../../../plugins/datepicker/bootstrap-datepicker.js"></script>
    <script src="../../../../plugins/datepicker/locales/bootstrap-datepicker.zh-CN.js"></script>
    <script src="../../../../plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.all.min.js"></script>
    <script src="../../../../plugins/slimScroll/jquery.slimscroll.min.js"></script>
    <script src="../../../../plugins/fastclick/fastclick.js"></script>
    <script src="../../../../plugins/iCheck/icheck.min.js"></script>
    <script src="../../../../plugins/adminLTE/js/app.min.js"></script>
    <script src="../../../../plugins/treeTable/jquery.treetable.js"></script>
    <script src="../../../../plugins/select2/select2.full.min.js"></script>
    <script src="../../../../plugins/colorpicker/bootstrap-colorpicker.min.js"></script>
    <script src="../../../../plugins/bootstrap-wysihtml5/bootstrap-wysihtml5.zh-CN.js"></script>
    <script src="../../../../plugins/bootstrap-markdown/js/bootstrap-markdown.js"></script>
    <script src="../../../../plugins/bootstrap-markdown/locale/bootstrap-markdown.zh.js"></script>
    <script src="../../../../plugins/bootstrap-markdown/js/markdown.js"></script>
    <script src="../../../../plugins/bootstrap-markdown/js/to-markdown.js"></script>
    <script src="../../../../plugins/ckeditor/ckeditor.js"></script>
    <script src="../../../../plugins/input-mask/jquery.inputmask.js"></script>
    <script src="../../../../plugins/input-mask/jquery.inputmask.date.extensions.js"></script>
    <script src="../../../../plugins/input-mask/jquery.inputmask.extensions.js"></script>
    <script src="../../../../plugins/datatables/jquery.dataTables.min.js"></script>
    <script src="../../../../plugins/datatables/dataTables.bootstrap.min.js"></script>
    <script src="../../../../plugins/chartjs/Chart.min.js"></script>
    <script src="../../../../plugins/flot/jquery.flot.min.js"></script>
    <script src="../../../../plugins/flot/jquery.flot.resize.min.js"></script>
    <script src="../../../../plugins/flot/jquery.flot.pie.min.js"></script>
    <script src="../../../../plugins/flot/jquery.flot.categories.min.js"></script>
    <script src="../../../../plugins/ionslider/ion.rangeSlider.min.js"></script>
    <script src="../../../../plugins/bootstrap-slider/bootstrap-slider.js"></script>
    <script src="../../../../plugins/bootstrap-datetimepicker/bootstrap-datetimepicker.js"></script>
    <script src="../../../../plugins/bootstrap-datetimepicker/locales/bootstrap-datetimepicker.zh-CN.js"></script>
    <script>
    var urlinfo = window.location.href;
    var len = urlinfo.split("?");
    var newsidinfo = len[1];
    console.log("len="+len);
    console.log("newsidinfo=" + newsidinfo);
    var newsids = newsidinfo.split("=");
    var parameter1 = newsids[1];
    console.log("parameter1="+parameter1);
    var p = 0;
    var e = 0;
    var c = 0;
        $(document).ready(function() {
            // 选择框
            $(".select2").select2();

            // WYSIHTML5编辑器
            $(".textarea").wysihtml5({
                locale: 'zh-CN'
            });
        });


        


        $(document).ready(function() {

            // 颜色选取器
            $(".my-colorpicker1").colorpicker();
            $(".my-colorpicker2").colorpicker();

        });




        $(document).ready(function() {
            // 选择框
            $(".select2").select2();
        });
        $(document).ready(function() {
            var models = loadModel();
            var properties = models.productPropertyModelList;
            var events = models.productEventModelList;
            var commands = models.productCommandModelList;
            console.log("events="+JSON.stringify(events));
            showPropertyDiv(properties);
            showEventDiv(events);
            showCommandDiv(commands);
        });
function showPropertyDiv(properties) {
    if(properties != null || properties != "" || properties != "null") {
        $.each(properties, function(i,item){
            p += 1;
            var pdiv = "";
            pdiv += '<div class="col-md-2 title">属性名称</div>';
            pdiv += '<div class="col-md-4 data text">';
            pdiv += '<input type="hidden" id="pid" value="'+item.strId+'" >';
            pdiv += '<input type="text" id="pname" value="'+item.name+'" class="form-control" placeholder="请输入属性名称（必填）" >';
            pdiv += '</div>';
            pdiv += '<div class="col-md-2 title">标识符</div>';
            pdiv += '<div class="col-md-4 data text">';
            pdiv += '<input type="text" id="pcode" class="form-control" placeholder="请输入属性标识符（必填）" value="'+item.code+'">';
            pdiv += '</div>';
            pdiv += '<div class="col-md-2 title">数据类型</div>';
            pdiv += '<div class="col-md-4 data text">';
            pdiv += '<div class="form-group form-inline">';
            pdiv += '<div class="radio"><label><input type="radio" id="dataType'+p.toString()+'" name="dataType'+p.toString()+'"  value="1"> 数值型</label></div>';
            pdiv += '<div class="radio"><label><input type="radio" id="dataType'+p.toString()+'" name="dataType'+p.toString()+'" value="2"> 布尔型</label></div>';
            pdiv += '<div class="radio"><label><input type="radio" id="dataType'+p.toString()+'" name="dataType'+p.toString()+'" value="3"> 字符型</label></div>';
            pdiv += '<div class="radio"><label><input type="radio" id="dataType'+p.toString()+'" name="dataType'+p.toString()+'" value="4" disabled> 枚举型</label></div>';
            pdiv += '</div>';
            pdiv += '</div>';
            pdiv += '<div class="col-md-2 title">访问类型</div>';
            pdiv += '<div class="col-md-4 data text">';
            pdiv += '<div class="form-group form-inline">';
            pdiv += '<div class="radio"><label><input type="radio" id="accessType'+p.toString()+'" name="accessType'+p.toString()+'" value="1" checked> 只读</label></div>';
            pdiv += '<div class="radio"><label><input type="radio" id="accessType'+p.toString()+'" name="accessType'+p.toString()+'" value="2"> 读写</label></div>'
            pdiv += '</div>';
            pdiv += '</div>';
            pdiv += '<div class="col-md-2 title ">发布状态</div>';
            pdiv += '<div class="col-md-10 data ">';
            pdiv += (item.status ? "已发布" : "未发布");
            pdiv += '</div>';
            pdiv += '<div> &nbsp;</div>';
            $('#prowdiv').append(pdiv);
            if(item.dataType == "1") {
                $("input:radio[name='dataType"+p.toString()+"']").eq(0).attr('checked','true');
            }
            if(item.dataType == "2") {
                $("input:radio[name='dataType"+p.toString()+"']").eq(1).attr('checked','true');
            }
            if(item.dataType == "3") {
                $("input:radio[name='dataType"+p.toString()+"']").eq(2).attr('checked','true');
            }
            if(item.dataType == "4") {
                $("input:radio[name='dataType"+p.toString()+"']").eq(3).attr('checked','true');

            }
            if(item.accessType == "1") {
                $("input:radio[name='accessType"+p.toString()+"']").eq(0).attr('checked','true');
            }
            if(item.accessType == "2") {
                $("input:radio[name='accessType"+p.toString()+"']").eq(1).attr('checked','true');
            }
            // console.log("pdiv="+pdiv);
        });  
        return;
    }

    p += 1;
    var pdiv = "";
    pdiv += '<div class="col-md-2 title">属性名称</div>';
    pdiv += '<div class="col-md-4 data text">';
    pdiv += '<input type="hidden" id="pid">';
    pdiv += '<input type="text" id="pname" class="form-control" placeholder="请输入属性名称（必填）" value="">';
    pdiv += '</div>';
    pdiv += '<div class="col-md-2 title">标识符</div>';
    pdiv += '<div class="col-md-4 data text">';
    pdiv += '<input type="text" id="pcode" class="form-control" placeholder="请输入属性标识符（必填）" value="">';
    pdiv += '</div>';
    pdiv += '<div class="col-md-2 title">数据类型</div>';
    pdiv += '<div class="col-md-4 data text">';
    pdiv += '<div class="form-group form-inline">';
    pdiv += '<div class="radio"><label><input type="radio" id="dataType'+p.toString()+'" name="dataType'+p.toString()+'"  value="1" checked> 数值型</label></div>';
    pdiv += '<div class="radio"><label><input type="radio" id="dataType'+p.toString()+'" name="dataType'+p.toString()+'" value="2"> 布尔型</label></div>';
    pdiv += '<div class="radio"><label><input type="radio" id="dataType'+p.toString()+'" name="dataType'+p.toString()+'" value="3"> 字符型</label></div>';
    pdiv += '<div class="radio"><label><input type="radio" id="dataType'+p.toString()+'" name="dataType'+p.toString()+'" value="4" disabled> 枚举型</label></div>';
    pdiv += '</div>';
    pdiv += '</div>';
    pdiv += '<div class="col-md-2 title">访问类型</div>';
    pdiv += '<div class="col-md-4 data text">';
    pdiv += '<div class="form-group form-inline">';
    pdiv += '<div class="radio"><label><input type="radio" id="accessType'+p.toString()+'" name="accessType'+p.toString()+'" value="1" checked> 只读</label></div>';
    pdiv += '<div class="radio"><label><input type="radio" id="accessType'+p.toString()+'" name="accessType'+p.toString()+'" value="2"> 读写</label></div>'
    pdiv += '</div>';
    pdiv += '</div>';
    pdiv += '<div> &nbsp;</div>';
    $('#prowdiv').append(pdiv);
    // $('input[id="dataType"]').each(function() {
    //     $(this).id="dataType"+p.toString();
    //     alert("p="+p);
    //     // pdataTypes.push($(this).val());
    // });


}

function showEventDiv(events) {
 if(events != null || events != "" || events != "null") {
    $.each(events, function(i,item){
        e += 1;
        var ediv = "";
        ediv += '<div class="col-md-2 title">事件名称</div>';
        ediv += '<div class="col-md-4 data">';
        ediv += '<input type="hidden" id="eid" value="'+item.strId+'">';
        ediv += '<input type="text" id="ename" class="form-control" placeholder="请输入事件名称（必填）" value="'+item.name+'">';
        ediv += '</div>';
        ediv += '<div class="col-md-2 title">事件标识符</div>';
        ediv += '<div class="col-md-4 data">';
        ediv += '<input type="text" id="ecode" class="form-control" placeholder="请输入事件标识符（必填）" value="'+item.code+'">';
        ediv += '</div>';
        ediv += '<div class="col-md-2 title">事件类型</div>';
        ediv += '<div class="col-md-10 data">';
        ediv += '<div class="form-group form-inline">';
        ediv += '<div class="radio"><label><input type="radio" id="eventType'+e.toString()+'" name="eventType'+e.toString()+'" value="1">信息</label></div>';
        ediv += '<div class="radio"><label><input type="radio" id="eventType'+e.toString()+'"  name="eventType'+e.toString()+'" value="2"> 告警</label></div>';
        ediv += '<div class="radio"><label><input type="radio" id="eventType'+e.toString()+'"  name="eventType'+e.toString()+'" value="3"> 故障</label></div>';
        ediv += '</div>';
        ediv += '</div>';
        ediv += '<div class="col-md-2 title rowHeight2x">备注</div>';
        ediv += '<div class="col-md-10 data rowHeight2x">';
        ediv += '<textarea class="form-control" id="eremark" value="'+item.remark+'" rows="3" placeholder="请输入备注..."></textarea>';
        ediv += '</div>';
        ediv += '<div class="col-md-2 title ">发布状态</div>';
        ediv += '<div class="col-md-10 data ">';
        ediv += (item.status ? "已发布" : "未发布");
        ediv += '</div>';
        ediv += '<div> &nbsp;</div>';
        $('#erowdiv').append(ediv); 
        console.log("ediv==="+ediv);
        if(item.eventType == 1) {
            $("input:radio[name='eventType"+e.toString()+"']").eq(0).attr('checked','true');
        }
        if(item.eventType == 2) {
            $("input:radio[name='eventType"+e.toString()+"']").eq(1).attr('checked','true');
        }
        if(item.eventType == 3) {
            $("input:radio[name='eventType"+e.toString()+"']").eq(2).attr('checked','true');
        }

    });

    return;
 }


    e += 1;
    var ediv = "";
    ediv += '<div class="col-md-2 title">事件名称</div>';
    ediv += '<div class="col-md-4 data">';
    ediv += '<input type="hidden" id="eid">';
    ediv += '<input type="text" id="ename" class="form-control" placeholder="请输入事件名称（必填）" value="">';
    ediv += '</div>';
    ediv += '<div class="col-md-2 title">事件标识符</div>';
    ediv += '<div class="col-md-4 data">';
    ediv += '<input type="text" id="ecode" class="form-control" placeholder="请输入事件标识符（必填）" value="">';
    ediv += '</div>';
    ediv += '<div class="col-md-2 title">事件类型</div>';
    ediv += '<div class="col-md-10 data">';
    ediv += '<div class="form-group form-inline">';
    ediv += '<div class="radio"><label><input type="radio" id="eventType'+e.toString()+'" name="eventType'+e.toString()+'" value="1" checked>信息</label></div>';
    ediv += '<div class="radio"><label><input type="radio" id="eventType'+e.toString()+'"  name="eventType'+e.toString()+'" value="2"> 告警</label></div>';
    ediv += '<div class="radio"><label><input type="radio" id="eventType'+e.toString()+'"  name="eventType'+e.toString()+'" value="3"> 故障</label></div>';
    ediv += '</div>';
    ediv += '</div>';
    ediv += '<div class="col-md-2 title rowHeight2x">备注</div>';
    ediv += '<div class="col-md-10 data rowHeight2x">';
    ediv += '<textarea class="form-control" id="eremark" rows="3" placeholder="请输入备注..."></textarea>';
    ediv += '</div>';
    ediv += '<div> &nbsp;</div>';
    $('#erowdiv').append(ediv);    

}

function showCommandDiv(commands) {
    if(commands != null || commands != "" || commands != "null") {
        $.each(commands, function(i,item){
        c += 1;
        var cdiv = "";
        cdiv += '<div class="col-md-2 title">指令名称</div>';
        cdiv += '<div class="col-md-4 data">';
        cdiv += '<input type="hidden" id="cid" value="'+item.strId+'">';
        cdiv += '<input type="text" id="cname" class="form-control" placeholder="请输入指令名称（必填）" value="'+item.name+'">';
        cdiv += '</div>';
        cdiv += '<div class="col-md-2 title">指令标识符</div>';
        cdiv += '<div class="col-md-4 data">';
        cdiv += '<input type="text" id="ccode" class="form-control" placeholder="请输入指令标识符（必填）" value="'+item.code+'">';
        cdiv += '</div>';
        cdiv += '<div class="col-md-2 title">调用方式</div>';
        cdiv += '<div class="col-md-10 data">';
        cdiv += '<div class="form-group form-inline">';
        cdiv += '<div class="radio"><label><input type="radio" id="callMode'+c.toString()+'" name="callMode'+c.toString()+'" value="1">异步</label></div>';
        cdiv += '<div class="radio"><label><input type="radio" id="callMode'+c.toString()+'"  name="callMode'+c.toString()+'" value="2"> 同步</label></div>';
        cdiv += '</div>';
        cdiv += '</div>';
        cdiv += '<div class="col-md-2 title rowHeight2x">备注</div>';
        cdiv += '<div class="col-md-10 data rowHeight2x">';
        cdiv += '<textarea class="form-control" id="cremark" value="'+item.remark+'" rows="3" placeholder="请输入备注..."></textarea>';
        cdiv += '</div>';
        cdiv += '<div class="col-md-2 title ">发布状态</div>';
        cdiv += '<div class="col-md-10 data ">';
        cdiv += (item.status ? "已发布" : "未发布");
        cdiv += '</div>';
        cdiv += '<div> &nbsp;</div>';
        $('#crowdiv').append(cdiv);    
        if(item.callMode == 1) {
            $("input:radio[name='callMode"+c.toString()+"']").eq(0).attr('checked','true');
        }
        if(item.callMode == 2) {
            $("input:radio[name='callMode"+c.toString()+"']").eq(1).attr('checked','true');
        }

        });
        return;
    } 

    c += 1;
    var cdiv = "";
    cdiv += '<div class="col-md-2 title">指令名称</div>';
    cdiv += '<div class="col-md-4 data">';
    cdiv += '<input type="hidden" id="cid">';
    cdiv += '<input type="text" id="cname" class="form-control" placeholder="请输入指令名称（必填）" value="">';
    cdiv += '</div>';
    cdiv += '<div class="col-md-2 title">指令标识符</div>';
    cdiv += '<div class="col-md-4 data">';
    cdiv += '<input type="text" id="ccode" class="form-control" placeholder="请输入指令标识符（必填）" value="">';
    cdiv += '</div>';
    cdiv += '<div class="col-md-2 title">调用方式</div>';
    cdiv += '<div class="col-md-10 data">';
    cdiv += '<div class="form-group form-inline">';
    cdiv += '<div class="radio"><label><input type="radio" id="callMode'+c.toString()+'" name="callMode'+c.toString()+'" value="1" checked>异步</label></div>';
    cdiv += '<div class="radio"><label><input type="radio" id="callMode'+c.toString()+'"  name="callMode'+c.toString()+'" value="2"> 同步</label></div>';
    cdiv += '</div>';
    cdiv += '</div>';
    cdiv += '<div class="col-md-2 title rowHeight2x">备注</div>';
    cdiv += '<div class="col-md-10 data rowHeight2x">';
    cdiv += '<textarea class="form-control" id="cremark" rows="3" placeholder="请输入备注..."></textarea>';
    cdiv += '</div>';
    cdiv += '<div> &nbsp;</div>';
    $('#crowdiv').append(cdiv);    
}

function saveProperty() {
    var pnames = [];
    var pcodes = [];
    var pdataTypes = [];
    var paccessTypes = [];
    var pids = [];
    var k = 0;
    var jsonData = {};
    // jsonData = 
    $('input[id="pname"]').each(function() {
        pnames.push($(this).val());
    });
    $('input[id="pcode"]').each(function() {
        pcodes.push($(this).val());
    });
    $('input[id="pid"]').each(function() {
        pids.push($(this).val());
    });
    var tmp = [];
    alert("pnames.length="+pnames.length);
    for(var i = 0; i < pnames.length; i++) {
        var cjd = {};
        cjd["name"] = pnames[i];
        cjd["code"] = pcodes[i];
        cjd["id"] = pids[i];
        cjd["dataType"] = $('input[id="dataType'+(i+1).toString()+'"]:checked').val();
        cjd["accessType"] = $('input[id="accessType'+(i+1).toString()+'"]:checked').val();
        cjd["productId"] = parameter1;
        cjd["status"] = false;
        tmp[i] = cjd;
        console.log("cjd="+JSON.stringify(cjd));
    }
    jsonData["productId"] = parameter1;
    jsonData["productPropertyModelList"] = tmp;
    console.log("jsonData="+JSON.stringify(jsonData));
    // $('input[id="dataType"]:checked').each(function() {
    //     alert("pd="+$(this).val());
    //     pdataTypes.push($(this).val());
    // });
    // $('input[id="accessType"]:checked').each(function() {
    //     alert("pa="+$(this).val());
    //     paccessTypes.push($(this).val());
    // });
    var storage = window.localStorage;
    var ctx = storage.getItem("ctx");
    var url = "";
    if(pids[0] == null || pids[0] == "") {
        url = "api/pc/product/pm/v1/add";
    } else {
        url = "api/pc/product/pm/v1/update";
    }

    $.ajax({
        type: "POST",
        dataType: "json",
        // async: false,
        beforeSend: function(XMLHttpRequest) {
            XMLHttpRequest.setRequestHeader("Authorization","Bearer "+storage.getItem("token"));
        },
        contentType: "application/json;charset=utf-8",
        url:ctx+url,
        data:JSON.stringify(jsonData),
        success: function(resData){
            if(resData.code == 0) {
                alert(resData.code+resData.msg);
            } else {
                alert(resData.code+resData.msg);

            }
            
        },
        error: function(XMLHttpRequest,status, error) {
            console.log("xhr======"+JSON.stringify(XMLHttpRequest));
        }
    });

}

function saveEvent() {
    var enames = [];
    var ecodes = [];
    var eventTypes = [];
    var eremarks = [];
    var eids = [];
    var k = 0;
    var jsonData = {};
    // jsonData = 
    $('input[id="ename"]').each(function() {
        enames.push($(this).val());
    });
    $('input[id="ecode"]').each(function() {
        ecodes.push($(this).val());
    });
    $('textarea[id="eremark"]').each(function() {
        eremarks.push($(this).val());
    });
    $('input[id="eid"]').each(function() {
        eids.push($(this).val());
    });
    var tmp = [];
    alert("enames.length="+enames.length);
    for(var i = 0; i < enames.length; i++) {
        var cjd = {};
        cjd["name"] = enames[i];
        cjd["code"] = ecodes[i];
        cjd["id"] = eids[i];
        cjd["eventType"] = $('input[id="eventType'+(i+1).toString()+'"]:checked').val();
        cjd["remark"] = eremarks[i];
        cjd["productId"] = parameter1;
        cjd["status"] = false;
        tmp[i] = cjd;
        console.log("cjd="+JSON.stringify(cjd));
    }
    jsonData["productId"] = parameter1;
    jsonData["productEventModelList"] = tmp;
    console.log("jsonData="+JSON.stringify(jsonData));
    // $('input[id="dataType"]:checked').each(function() {
    //     alert("pd="+$(this).val());
    //     pdataTypes.push($(this).val());
    // });
    // $('input[id="accessType"]:checked').each(function() {
    //     alert("pa="+$(this).val());
    //     paccessTypes.push($(this).val());
    // });
    var storage = window.localStorage;
    var ctx = storage.getItem("ctx");
    var url = "";
    if(eids[0] == null || eids[0] == "") {
        url = "api/pc/product/em/v1/add";
    } else {
        url = "api/pc/product/em/v1/update";
    }
    $.ajax({
        type: "POST",
        dataType: "json",
        // async: false,
        beforeSend: function(XMLHttpRequest) {
            XMLHttpRequest.setRequestHeader("Authorization","Bearer "+storage.getItem("token"));
        },
        contentType: "application/json;charset=utf-8",
        url:ctx+url,
        data:JSON.stringify(jsonData),
        success: function(resData){
            if(resData.code == 0) {
                alert(resData.code+resData.msg);
            } else {
                alert(resData.code+resData.msg);

            }
            
        },
        error: function(XMLHttpRequest,status, error) {
            console.log("xhr======"+JSON.stringify(XMLHttpRequest));
        }
    });

}

function saveCommand() {
    var cnames = [];
    var ccodes = [];
    var callModes = [];
    var cremarks = [];
    var cids = [];
    var k = 0;
    var jsonData = {};
    // jsonData = 
    $('input[id="cname"]').each(function() {
        cnames.push($(this).val());
    });
    $('input[id="ccode"]').each(function() {
        ccodes.push($(this).val());
    });
    $('textarea[id="cremark"]').each(function() {
        cremarks.push($(this).val());
    });
    $('input[id="cid"]').each(function() {
        cids.push($(this).val());
    });
    var tmp = [];
    alert("cnames.length="+cnames.length);
    for(var i = 0; i < cnames.length; i++) {
        var cjd = {};
        cjd["name"] = cnames[i];
        cjd["code"] = ccodes[i];
        cjd["id"] = cids[i];
        cjd["callMode"] = $('input[id="callMode'+(i+1).toString()+'"]:checked').val();
        cjd["remark"] = cremarks[i];
        cjd["productId"] = parameter1;
        cjd["status"] = false;
        tmp[i] = cjd;
        console.log("cjd="+JSON.stringify(cjd));
    }
    jsonData["productId"] = parameter1;
    jsonData["productCommandModelList"] = tmp;
    console.log("jsonData="+JSON.stringify(jsonData));
    // $('input[id="dataType"]:checked').each(function() {
    //     alert("pd="+$(this).val());
    //     pdataTypes.push($(this).val());
    // });
    // $('input[id="accessType"]:checked').each(function() {
    //     alert("pa="+$(this).val());
    //     paccessTypes.push($(this).val());
    // });
    var storage = window.localStorage;
    var ctx = storage.getItem("ctx");
    var url = "";
    if(cids[0] == null || cids[0] == "") {
        url = "api/pc/product/cm/v1/add";
    } else {
        url = "api/pc/product/cm/v1/update";
    }
    $.ajax({
        type: "POST",
        dataType: "json",
        // async: false,
        beforeSend: function(XMLHttpRequest) {
            XMLHttpRequest.setRequestHeader("Authorization","Bearer "+storage.getItem("token"));
        },
        contentType: "application/json;charset=utf-8",
        url:ctx+url,
        data:JSON.stringify(jsonData),
        success: function(resData){
            if(resData.code == 0) {
                alert(resData.code+resData.msg);
            } else {
                alert(resData.code+resData.msg);

            }
            
        },
        error: function(XMLHttpRequest,status, error) {
            console.log("xhr======"+JSON.stringify(XMLHttpRequest));
        }
    });
}

function pubModel() {
    var jsonData = {"id":parameter1};
    var storage = window.localStorage;
    var ctx = storage.getItem("ctx");
    // var data = "";
    $.ajax({
        type: "POST",
        dataType: "json",
        async: false,
        beforeSend: function(XMLHttpRequest) {
            XMLHttpRequest.setRequestHeader("Authorization","Bearer "+storage.getItem("token"));
        },
        contentType: "application/json;charset=utf-8",
        url:ctx+'api/pc/product/model/v1/pubModel',
        data:JSON.stringify(jsonData),
        success: function(resData){
            if(resData.code == 0) {            
                console.log("resData=11="+JSON.stringify(resData.data));
                alert(resData.code+resData.msg);
                // data = resData.data;
            } else {
                alert(resData.code+resData.msg);

            }
            
        },
        error: function(XMLHttpRequest,status, error) {
            console.log("xhr======"+JSON.stringify(XMLHttpRequest));
        }
    });
    

}

function delModel() {

    var jsonData = "";
    jsonData = {"productId":parameter1};
}

function loadModel() {
    var jsonData = {"id":parameter1};
    var storage = window.localStorage;
    var ctx = storage.getItem("ctx");
    var data = "";
    $.ajax({
        type: "POST",
        dataType: "json",
        async: false,
        beforeSend: function(XMLHttpRequest) {
            XMLHttpRequest.setRequestHeader("Authorization","Bearer "+storage.getItem("token"));
        },
        contentType: "application/json;charset=utf-8",
        url:ctx+'api/pc/product/model/v1/findOne',
        data:JSON.stringify(jsonData),
        success: function(resData){
            if(resData.code == 0) {
                // alert(resData.code+resData.msg);
                
                console.log("resData=11="+JSON.stringify(resData.data));
                data = resData.data;
            } else {
                alert(resData.code+resData.msg);

            }
            
        },
        error: function(XMLHttpRequest,status, error) {
            console.log("xhr======"+JSON.stringify(XMLHttpRequest));
        }
    });
    return data;
}

</script>
</body>

</html>